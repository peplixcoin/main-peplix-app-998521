"use strict";(self.webpackChunkadmin_dashboard_template_dashwind=self.webpackChunkadmin_dashboard_template_dashwind||[]).push([[636],{2782:function(e,t,a){var r=a(3547),n=a(184);t.Z=function(e){var t=e.title,a=e.children,s=e.topMargin,l=e.TopSideButtons;return(0,n.jsxs)("div",{className:"card w-full p-6 bg-base-100 shadow-xl "+(s||"mt-6"),children:[(0,n.jsxs)(r.Z,{styleClass:l?"inline-block":"",children:[t,l&&(0,n.jsx)("div",{className:"inline-block float-right",children:l})]}),(0,n.jsx)("div",{className:"divider mt-2"}),(0,n.jsx)("div",{className:"h-full w-full pb-6 bg-base-100",children:a})]})}},3547:function(e,t,a){var r=a(184);t.Z=function(e){var t=e.styleClass,a=e.children;return(0,r.jsx)("div",{className:"text-xl font-semibold ".concat(t),children:a})}},8636:function(e,t,a){a.r(t),a.d(t,{default:function(){return x}});var r=a(2791),n=a(9434),s=a(5054),l=a(4165),i=a(1413),c=a(5861),d=a(9439),o=a(2782),u=a(1989),h=a(7689),m=a(184);var p=function(){var e=(0,r.useState)(0),t=(0,d.Z)(e,2),a=t[0],p=t[1],x=(0,r.useState)([]),f=(0,d.Z)(x,2),b=f[0],g=f[1],w=(0,r.useState)(!0),v=(0,d.Z)(w,2),j=v[0],N=v[1],k=(0,r.useState)(null),Z=(0,d.Z)(k,2),y=Z[0],I=Z[1],S=(0,r.useState)(0),A=(0,d.Z)(S,2),W=(A[0],A[1]),F=(0,r.useState)([]),C=(0,d.Z)(F,2),D=C[0],T=C[1],M=(0,r.useState)(""),B=(0,d.Z)(M,2),E=B[0],P=B[1],_=(0,r.useState)(""),z=(0,d.Z)(_,2),R=z[0],q=z[1],$=(0,r.useState)(""),U=(0,d.Z)($,2),L=U[0],Y=U[1],H=(0,r.useState)(null),O=(0,d.Z)(H,2),G=O[0],J=O[1],K=(0,n.I0)(),Q=(0,h.s0)(),V=function(){var e=(0,c.Z)((0,l.Z)().mark((function e(t){var a,r,n,s=arguments;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:{},r=s.length>2&&void 0!==s[2]?s[2]:3,e.prev=2,e.next=5,(0,u.Z)(t,(0,i.Z)((0,i.Z)({},a),{},{timeout:5e3}));case 5:return n=e.sent,e.abrupt("return",n.data);case 9:if(e.prev=9,e.t0=e.catch(2),!(r>0)){e.next=15;break}return e.abrupt("return",V(t,a,r-1));case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){K((0,s.hS)());var e=function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){var t,a;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("token")){e.next=5;break}return K((0,s.c0)({message:"No token found. Please log in again.",status:0})),N(!1),e.abrupt("return");case 5:return e.prev=5,e.next=8,V("".concat("https://main-peplix-app-998521.onrender.com","/api/users/profile"),{headers:{Authorization:"Bearer ".concat(t)}});case 8:a=e.sent,p(a.wallet||0),I(null),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),I("Failed to fetch sponsor and wallet data."),K((0,s.c0)({message:"Failed to fetch sponsor and wallet data.",status:0}));case 17:return e.prev=17,N(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[5,13,17,20]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){var t,a;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("token")){e.next=5;break}return K((0,s.c0)({message:"No token found. Please log in again.",status:0})),N(!1),e.abrupt("return");case 5:return e.prev=5,e.next=8,V("".concat("https://main-peplix-app-998521.onrender.com","/api/users/team"),{headers:{Authorization:"Bearer ".concat(t)}});case 8:a=e.sent,g(a||[]),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),I("Failed to fetch team members."),K((0,s.c0)({message:"Failed to fetch team members.",status:0}));case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){var t,a;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.prev=1,e.next=4,V("".concat("https://main-peplix-app-998521.onrender.com","/api/users/withdraw-wallet"),{headers:{Authorization:"Bearer ".concat(t)}});case 4:a=e.sent,W(a.withdrawWallet||0),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){var t,a;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.prev=1,e.next=4,V("".concat("https://main-peplix-app-998521.onrender.com","/api/users/withdrawal-history"),{headers:{Authorization:"Bearer ".concat(t)}});case 4:a=e.sent,T(a||[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),K((0,s.c0)({message:"Failed to fetch wallet withdrawal history.",status:0}));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();e(),t(),a(),r()}),[K]),(0,r.useEffect)((function(){if(null!==G&&G>0){var e=setTimeout((function(){J(G-1)}),1e3);return function(){return clearTimeout(e)}}0===G&&Q("/app/dashboard")}),[G,Q]);var X=function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){var t;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("token")){e.next=4;break}return K((0,s.c0)({message:"No token found. Please log in again.",status:0})),e.abrupt("return");case 4:if(E&&R&&L){e.next=7;break}return K((0,s.c0)({message:"Please fill in all fields.",status:0})),e.abrupt("return");case 7:if(R===L){e.next=10;break}return K((0,s.c0)({message:"Wallet Address IDs do not match.",status:0})),e.abrupt("return");case 10:if(!(parseFloat(E)>a)){e.next=13;break}return K((0,s.c0)({message:"Insufficient amount in your wallet.",status:0})),e.abrupt("return");case 13:return e.prev=13,e.next=16,V("".concat("https://main-peplix-app-998521.onrender.com","/api/users/withdraw-wallet"),{method:"POST",data:{withdrawAmount:E,upiId:R},headers:{Authorization:"Bearer ".concat(t)}});case 16:e.sent,K((0,s.c0)({message:"Withdrawal Request sent successfully. Redirecting to dashboard in 5 seconds...",status:1})),P(""),q(""),Y(""),J(5),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(13),e.t0.response&&e.t0.response.data&&"You must own at least one package to withdraw funds."===e.t0.response.data.message?K((0,s.c0)({message:"You must own at least one package to withdraw wallet amount",status:0})):e.t0.response&&e.t0.response.data&&"The minimum withdrawal amount is $15."===e.t0.response.data.message?K((0,s.c0)({message:"Minimum wallet withdrawal amount is $15",status:0})):K((0,s.c0)({message:"Failed to submit withdrawal request.",status:0}));case 27:case"end":return e.stop()}}),e,null,[[13,24]])})));return function(){return e.apply(this,arguments)}}();return j?(0,m.jsx)("p",{children:"Loading..."}):y?(0,m.jsx)("p",{className:"text-red-500",children:y}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6 animate-fadeIn",children:(0,m.jsx)(o.Z,{title:"Wallet Amount",topMargin:"mt-2",children:(0,m.jsxs)("p",{className:"text-lg font-semibold",children:["$",a]})})}),(0,m.jsx)("div",{className:"mb-6 animate-fadeIn",children:(0,m.jsx)(o.Z,{title:"My Team",topMargin:"mt-2",children:(0,m.jsx)("div",{className:"overflow-x-auto w-full",children:(0,m.jsxs)("table",{className:"table w-full",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"Username"}),(0,m.jsx)("th",{children:"Rank"}),(0,m.jsx)("th",{children:"Email"}),(0,m.jsx)("th",{children:"Phone Number"})]})}),(0,m.jsx)("tbody",{children:b.length>0?b.map((function(e,t){return(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:e.username}),(0,m.jsx)("td",{children:e.rank}),(0,m.jsx)("td",{children:e.email}),(0,m.jsx)("td",{children:e.phoneNumber})]},t)})):(0,m.jsx)("tr",{children:(0,m.jsx)("td",{colSpan:"4",className:"text-center",children:"No team members found"})})})]})})})}),(0,m.jsx)("div",{className:"mb-6 animate-fadeIn",children:(0,m.jsx)(o.Z,{title:"Withdraw Wallet Amount",topMargin:"mt-2",children:(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("label",{htmlFor:"withdrawAmount",className:"block text-lg font-semibold text-gray-600 mb-2",children:"Withdraw Amount"}),(0,m.jsx)("input",{type:"number",id:"withdrawAmount",value:E,onChange:function(e){return P(e.target.value)},className:"input input-bordered w-full p-3 border-gray-300 rounded-md",placeholder:"Enter amount to withdraw"})]}),(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("label",{htmlFor:"upiId",className:"block text-lg font-semibold text-gray-600 mb-2",children:"Wallet Address ID"}),(0,m.jsx)("input",{type:"text",id:"upiId",value:R,onChange:function(e){return q(e.target.value)},className:"input input-bordered w-full p-3 border-gray-300 rounded-md",placeholder:"Enter your Wallet Address ID"})]}),(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("label",{htmlFor:"confirmUpiId",className:"block text-lg font-semibold text-gray-600 mb-2",children:"Confirm Wallet Address ID"}),(0,m.jsx)("input",{type:"text",id:"confirmUpiId",value:L,onChange:function(e){return Y(e.target.value)},className:"input input-bordered w-full p-3 border-gray-300 rounded-md",placeholder:"Confirm your Wallet Address ID"})]}),(0,m.jsx)("button",{onClick:X,className:"btn btn-primary w-full p-3 font-bold rounded-md hover:bg-blue-700 transition duration-300 mt-1",children:"Submit Withdrawal Request"}),null!==G&&(0,m.jsxs)("p",{className:"mt-4 text-center text-gray-600 font-semibold",children:["Redirecting to dashboard in ",G," second",1!==G?"s":"","."]})]})})}),(0,m.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6 mb-6 animate-fadeIn",children:(0,m.jsx)(o.Z,{title:"Wallet Withdrawal History",topMargin:"mt-2",children:(0,m.jsx)("div",{className:"overflow-x-auto w-full",children:(0,m.jsxs)("table",{className:"table w-full",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"Date"}),(0,m.jsx)("th",{children:"Amount"}),(0,m.jsx)("th",{children:"Transaction "}),(0,m.jsx)("th",{children:"Wallet Address "}),(0,m.jsx)("th",{children:"Status"})]})}),(0,m.jsx)("tbody",{children:D.length>0?D.map((function(e,t){return(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:new Date(e.requestedAt).toLocaleDateString()}),(0,m.jsxs)("td",{children:["$",e.withdrawAmount]}),(0,m.jsx)("td",{children:e.utrNo||"N/A"}),(0,m.jsx)("td",{children:e.upiId||"N/A"}),(0,m.jsx)("td",{children:(a=e.status,"approved"===a?(0,m.jsx)("div",{className:"badge badge-success",children:a}):"pending"===a?(0,m.jsx)("div",{className:"badge badge-primary",children:a}):"rejected"===a?(0,m.jsx)("div",{className:"badge badge-error",children:a}):(0,m.jsx)("div",{className:"badge badge-ghost",children:a}))})]},t);var a})):(0,m.jsx)("tr",{children:(0,m.jsx)("td",{colSpan:"5",className:"text-center",children:"No withdrawal history found"})})})]})})})})]})};var x=function(){var e=(0,n.I0)();return(0,r.useEffect)((function(){e((0,s.Iw)({title:"Team"}))}),[]),(0,m.jsx)(p,{})}}}]);
//# sourceMappingURL=636.5b3f6690.chunk.js.map