(self.webpackChunkadmin_dashboard_template_dashwind=self.webpackChunkadmin_dashboard_template_dashwind||[]).push([[531],{5524:function(e,t,s){"use strict";var r=s(9439),a=s(2791),n=s(184);t.Z=function(e){var t=e.labelTitle,s=e.labelStyle,l=e.type,i=e.containerStyle,o=e.defaultValue,c=e.placeholder,d=e.updateFormValue,u=e.updateType,m=(0,a.useState)(o),p=(0,r.Z)(m,2),x=p[0],f=p[1];return(0,n.jsxs)("div",{className:"form-control w-full ".concat(i),children:[(0,n.jsx)("label",{className:"label",children:(0,n.jsx)("span",{className:"label-text text-base-content "+s,children:t})}),(0,n.jsx)("input",{type:l||"text",value:x,placeholder:c||"",onChange:function(e){return t=e.target.value,f(t),void d({updateType:u,value:t});var t},className:"input  input-bordered w-full "})]})}},9697:function(e,t,s){"use strict";var r=s(184);t.Z=function(e){var t=e.styleClass,s=e.children;return(0,r.jsx)("p",{className:"text-center  text-error ".concat(t),children:s})}},733:function(e,t,s){"use strict";s(184)},4856:function(e,t,s){"use strict";var r=s(4942),a=s(1413),n=s(4165),l=s(5861),i=s(9439),o=s(2791),c=s(7689),d=s(1087),u=s(9434),m=(s(733),s(9697)),p=s(5524),x=s(1989),f=s(5054),h=s(184);t.Z=function(e){e.fetchUserProfile;var t=(0,o.useState)(!1),s=(0,i.Z)(t,2),w=s[0],b=s[1],v=(0,o.useState)(""),g=(0,i.Z)(v,2),j=g[0],y=g[1],N=(0,o.useState)({emailId:"",password:""}),k=(0,i.Z)(N,2),Z=k[0],P=k[1],S=(0,o.useState)(""),I=(0,i.Z)(S,2),T=I[0],O=I[1],C=(0,c.s0)(),V=(0,u.I0)(),_=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(t){var s,r,a=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.length>1&&void 0!==a[1]?a[1]:3,e.prev=1,e.next=4,x.Z.post("".concat("https://main-peplix-app-998521.onrender.com","/api/users/login"),t,{timeout:5e3});case 4:return r=e.sent,e.abrupt("return",r.data);case 8:if(e.prev=8,e.t0=e.catch(1),!(s>0)){e.next=14;break}return e.abrupt("return",_(t,s-1));case 14:throw e.t0;case 15:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(t){var s,r,a,l,i,o,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),y(""),O(""),""!==Z.emailId.trim()){e.next=8;break}return y(s="Email Id is required!"),V((0,f.c0)({message:s,status:0})),e.abrupt("return");case 8:if(""!==Z.password.trim()){e.next=13;break}return y(r="Password is required!"),V((0,f.c0)({message:r,status:0})),e.abrupt("return");case 13:return b(!0),e.prev=14,a={email:Z.emailId,password:Z.password},e.next=18,_(a);case 18:l=e.sent,localStorage.setItem("token",l.token),O("Login successful!"),V((0,f.c0)({message:"Login successful!",status:1})),C("/app/dashboard"),e.next=31;break;case 25:e.prev=25,e.t0=e.catch(14),b(!1),c=(null===(i=e.t0.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message)||"Failed to login after multiple attempts. Please try again later.",y(c),V((0,f.c0)({message:c,status:0}));case 31:return e.prev=31,b(!1),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[14,25,31,34]])})));return function(t){return e.apply(this,arguments)}}(),F=function(e){var t=e.updateType,s=e.value;y(""),O(""),P((0,a.Z)((0,a.Z)({},Z),{},(0,r.Z)({},t,s)))};return(0,h.jsx)("div",{className:"min-h-screen bg-base-200 flex items-center",children:(0,h.jsx)("div",{className:"card mx-auto w-full max-w-5xl shadow-xl flex justify-center items-center",children:(0,h.jsx)("div",{className:"grid md:grid-cols-1 grid-cols-1 bg-base-100 rounded-xl w-full md:w-1/2 animate-fadeIn",children:(0,h.jsxs)("div",{className:"py-24 px-10",children:[(0,h.jsxs)("h1",{className:"text-3xl text-center font-bold mb-8 ",children:[(0,h.jsx)("img",{src:"/logo197.png",className:"w-12 inline-block mr-2 mask mask-circle",alt:"dashwind-logo"}),"Peplix"]}),(0,h.jsx)("h2",{className:"text-2xl font-semibold mb-2 text-center",children:"Login"}),(0,h.jsxs)("form",{onSubmit:E,children:[(0,h.jsxs)("div",{className:"mb-4",children:[(0,h.jsx)(p.Z,{type:"email",defaultValue:Z.emailId,updateType:"emailId",containerStyle:"mt-4",labelTitle:"Email Id",updateFormValue:F}),(0,h.jsx)(p.Z,{defaultValue:Z.password,type:"password",updateType:"password",containerStyle:"mt-4",labelTitle:"Password",updateFormValue:F})]}),(0,h.jsx)("div",{className:"text-right text-primary",children:(0,h.jsx)(d.rU,{to:"/forgot-password",children:(0,h.jsx)("span",{className:"text-sm inline-block hover:text-primary hover:underline hover:cursor-pointer transition duration-200",children:"Forgot Password?"})})}),j&&(0,h.jsx)(m.Z,{styleClass:"mt-8",children:j}),T&&(0,h.jsx)("p",{className:"mt-4 text-center text-green-500",children:T}),(0,h.jsx)("button",{type:"submit",className:"btn mt-2 w-full btn-primary"+(w?" loading":""),disabled:w,children:"Login"}),(0,h.jsxs)("div",{className:"text-center mt-4",children:["Don't have an account yet?"," ",(0,h.jsx)(d.rU,{to:"/register",children:(0,h.jsx)("span",{className:"inline-block hover:text-primary hover:underline hover:cursor-pointer transition duration-200",children:"Register"})})]})]})]})})})})}},531:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var r=s(2791),a=s(9434),n=(s(733),s(9697)),l=s(5524),i=s(5054),o=s(184);s(4856);var c=s(4942),d=s(1413),u=s(4165),m=s(5861),p=s(9439),x=s(7689),f=s(1087),h=s(9794),w=s.n(h);var b=function(){var e=(0,x.UO)().token,t=(0,x.s0)(),s=(0,a.I0)(),h=(0,r.useState)(!1),b=(0,p.Z)(h,2),v=b[0],g=b[1],j=(0,r.useState)(""),y=(0,p.Z)(j,2),N=y[0],k=y[1],Z=(0,r.useState)(!1),P=(0,p.Z)(Z,2),S=P[0],I=P[1],T=(0,r.useState)({password:"",confirmPassword:""}),O=(0,p.Z)(T,2),C=O[0],V=O[1],_=function(){var r=(0,m.Z)((0,u.Z)().mark((function r(a){var n,l;return(0,u.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.preventDefault(),k(""),""!==C.password.trim()){r.next=4;break}return r.abrupt("return",k("Password is required!"));case 4:if(""!==C.confirmPassword.trim()){r.next=6;break}return r.abrupt("return",k("Confirm Password is required!"));case 6:if(C.password===C.confirmPassword){r.next=8;break}return r.abrupt("return",k("Passwords do not match!"));case 8:return g(!0),r.prev=9,r.next=12,fetch("https://stlk-backend.onrender.com/api/users/reset-password/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:C.password})});case 12:return n=r.sent,r.next=15,n.json();case 15:l=r.sent,g(!1),n.ok?(I(!0),s((0,i.c0)({message:"Password reset successful!",status:1})),setTimeout((function(){return t("/login")}),3e3)):"Invalid or expired token"===l.message?(k("Your reset token has expired. Please request a new one."),s((0,i.c0)({message:"Your reset token has expired. Please request a new one.",status:0}))):(k(l.message||"Something went wrong."),s((0,i.c0)({message:l.message||"Something went wrong.",status:0}))),r.next=25;break;case 20:r.prev=20,r.t0=r.catch(9),g(!1),k("Error resetting password, please try again."),s((0,i.c0)({message:"Error resetting password, please try again.",status:0}));case 25:case"end":return r.stop()}}),r,null,[[9,20]])})));return function(e){return r.apply(this,arguments)}}(),E=function(e){var t=e.updateType,s=e.value;k(""),V((0,d.Z)((0,d.Z)({},C),{},(0,c.Z)({},t,s)))};return(0,o.jsx)("div",{className:"min-h-screen bg-base-200 flex items-center",children:(0,o.jsx)("div",{className:"card mx-auto w-full max-w-5xl shadow-xl flex justify-center items-center",children:(0,o.jsx)("div",{className:"grid md:grid-cols-1 grid-cols-1 bg-base-100 rounded-xl w-full md:w-1/2 animate-fadeIn",children:(0,o.jsxs)("div",{className:"py-24 px-10",children:[(0,o.jsxs)("h1",{className:"text-3xl text-center font-bold ",children:[(0,o.jsx)("img",{src:"/logo197.png",className:"w-12 inline-block mr-2 mask mask-circle",alt:"dashwind-logo"}),"Peplix"]}),(0,o.jsx)("h2",{className:"text-2xl font-semibold mb-2 mt-10 text-center",children:"Reset Password"}),S?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"text-center mt-8",children:(0,o.jsx)(w(),{className:"inline-block w-32 text-success"})}),(0,o.jsx)("p",{className:"my-4 text-xl font-bold text-center",children:"Password Reset Successful"}),(0,o.jsx)("p",{className:"mt-4 mb-8 font-semibold text-center",children:"Redirecting to login..."})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"my-8 font-semibold text-center",children:"Enter your new password below."}),(0,o.jsxs)("form",{onSubmit:_,children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)(l.Z,{type:"password",defaultValue:C.password,updateType:"password",containerStyle:"mt-4",labelTitle:"New Password",updateFormValue:E}),(0,o.jsx)(l.Z,{type:"password",defaultValue:C.confirmPassword,updateType:"confirmPassword",containerStyle:"mt-4",labelTitle:"Confirm Password",updateFormValue:E})]}),(0,o.jsx)(n.Z,{styleClass:"mt-12",children:N}),(0,o.jsx)("button",{type:"submit",className:"btn mt-2 w-full btn-primary ".concat(v?"loading":""),disabled:v,children:"Reset Password"}),(0,o.jsx)("div",{className:"text-center mt-4",children:(0,o.jsx)(f.rU,{to:"/login",children:(0,o.jsx)("span",{className:"inline-block hover:text-primary hover:underline hover:cursor-pointer transition duration-200",children:"Back to Login"})})})]})]})]})})})})};var v=function(){return(0,o.jsx)("div",{className:"",children:(0,o.jsx)(b,{})})}},9794:function(e,t,s){var r=s(215).default,a=["title","titleId"],n=s(2791);var l=n.forwardRef((function(e,t){var s=e.title,l=e.titleId,i=r(e,a);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":l},i),s?n.createElement("title",{id:l},s):null,n.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"}))}));e.exports=l},215:function(e,t,s){var r=s(7071);e.exports=function(e,t){if(null==e)return{};var s,a,n=r(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)s=l[a],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n},e.exports.__esModule=!0,e.exports.default=e.exports},7071:function(e){e.exports=function(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a},e.exports.__esModule=!0,e.exports.default=e.exports}}]);
//# sourceMappingURL=531.5b161a1d.chunk.js.map