"use strict";(self.webpackChunkadmin_dashboard_template_dashwind=self.webpackChunkadmin_dashboard_template_dashwind||[]).push([[542],{2782:function(e,t,a){var n=a(3547),r=a(184);t.Z=function(e){var t=e.title,a=e.children,s=e.topMargin,i=e.TopSideButtons;return(0,r.jsxs)("div",{className:"card w-full p-6 bg-base-100 shadow-xl "+(s||"mt-6"),children:[(0,r.jsxs)(n.Z,{styleClass:i?"inline-block":"",children:[t,i&&(0,r.jsx)("div",{className:"inline-block float-right",children:i})]}),(0,r.jsx)("div",{className:"divider mt-2"}),(0,r.jsx)("div",{className:"h-full w-full pb-6 bg-base-100",children:a})]})}},3547:function(e,t,a){var n=a(184);t.Z=function(e){var t=e.styleClass,a=e.children;return(0,n.jsx)("div",{className:"text-xl font-semibold ".concat(t),children:a})}},542:function(e,t,a){a.r(t),a.d(t,{default:function(){return k}});var n=a(2791),r=a(9434),s=a(5054),i=a(4165),c=a(1413),l=a(5861),o=a(9439),u=a(1989),d=a(184);var h=function(e){var t=e.title,a=e.icon,n=e.value,r=e.description,s=e.colorIndex,i=["primary","primary"];return(0,d.jsx)("div",{className:"stats shadow",children:(0,d.jsxs)("div",{className:"stat",children:[(0,d.jsx)("div",{className:"stat-figure dark:text-slate-300 text-".concat(i[s%2]),children:a}),(0,d.jsx)("div",{className:"stat-title dark:text-slate-300",children:t}),(0,d.jsx)("div",{className:"stat-value dark:text-slate-300 text-".concat(i[s%2]),children:n}),(0,d.jsx)("div",{className:"stat-desc  "+(r.includes("\u2197\ufe0e")?"font-bold text-green-700 dark:text-green-300":r.includes("\u2199")?"font-bold text-rose-500 dark:text-red-400":""),children:r})]})})},f=a(8809);a(2782);f.kL.register(f.qi,f.u,f.De,f.Gu);var p=a(4143),x=a.n(p),v=a(5376),m=a.n(v);var g=function(){var e=(0,n.useState)([]),t=(0,o.Z)(e,2),a=t[0],f=t[1],p=(0,n.useState)(null),v=(0,o.Z)(p,2),g=v[0],k=v[1],j=(0,n.useState)(!0),b=(0,o.Z)(j,2),Z=b[0],w=b[1],N=(0,n.useState)(0),I=(0,o.Z)(N,2),S=I[0],y=I[1],T=(0,n.useState)([]),A=(0,o.Z)(T,2),D=(A[0],A[1]),F=(0,n.useState)([]),_=(0,o.Z)(F,2),C=(_[0],_[1]),B=(0,n.useState)(0),z=(0,o.Z)(B,2),E=z[0],L=z[1],P=(0,n.useState)(0),V=(0,o.Z)(P,2),W=V[0],$=V[1],q=(0,n.useState)(0),G=(0,o.Z)(q,2),M=G[0],H=G[1],J=(0,r.I0)(),K=function(){var e=(0,l.Z)((0,i.Z)().mark((function e(t){var a,n,r,s=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:{},n=s.length>2&&void 0!==s[2]?s[2]:3,e.prev=2,e.next=5,(0,u.Z)(t,(0,c.Z)((0,c.Z)({},a),{},{timeout:5e3}));case 5:return r=e.sent,e.abrupt("return",r.data);case 9:if(e.prev=9,e.t0=e.catch(2),!(n>0)){e.next=15;break}return e.abrupt("return",K(t,a,n-1));case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return(0,n.useEffect)((function(){J((0,s.hS)());var e=function(){var e=(0,l.Z)((0,i.Z)().mark((function e(){var t,a,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("token")){e.next=5;break}return k("No token found, please log in again."),w(!1),e.abrupt("return");case 5:return e.prev=5,e.next=8,K("http://localhost:5000/api/users/stats",{headers:{Authorization:"Bearer ".concat(t)}});case 8:a=e.sent,n=[{title:"Current Token Value",value:"$".concat(a.tokenValue),icon:(0,d.jsx)(x(),{className:"w-8 h-8"}),description:a.tokenDescription||"\u2197\ufe0e 15%"}],f(n),k(null),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),k("Failed to fetch stats data after multiple attempts. Please try again later.");case 17:return e.prev=17,w(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[5,14,17,20]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=(0,l.Z)((0,i.Z)().mark((function e(){var t,a,n,r,c,l,o,u,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("token")){e.next=6;break}return k("No token found, please log in again."),J((0,s.c0)({message:"No token found, please log in again.",status:0})),w(!1),e.abrupt("return");case 6:return e.prev=6,e.next=9,K("http://localhost:5000/api/users/profile",{headers:{Authorization:"Bearer ".concat(t)}});case 9:return a=e.sent,n=a.totalAmountInvested||0,y(n),e.next=14,K("http://localhost:5000/api/users/transactions",{headers:{Authorization:"Bearer ".concat(t)}});case 14:r=e.sent,c=r.sort((function(e,t){return new Date(t.dateandtime)-new Date(e.dateandtime)})),D(c),l=c.filter((function(e){return"approved"===e.status})),C(l),o=l.reduce((function(e,t){return e+(t.tokens||0)}),0),u=l.reduce((function(e,t){return e+(t.tokensAvailable||0)}),0),d=l.reduce((function(e,t){return e+(t.tokensWithdrawn||0)}),0),L(o),$(u),H(d),k(null),J((0,s.c0)({message:"Data loaded successfully!",status:1})),e.next=33;break;case 29:e.prev=29,e.t0=e.catch(6),k("Failed to fetch user data after multiple attempts. Please try again later."),J((0,s.c0)({message:"Failed to fetch data.",status:0}));case 33:return e.prev=33,w(!1),e.finish(33);case 36:case"end":return e.stop()}}),e,null,[[6,29,33,36]])})));return function(){return e.apply(this,arguments)}}();t(),e()}),[J]),Z?(0,d.jsx)("p",{children:"Loading..."}):g?(0,d.jsx)("p",{className:"text-red-500",children:g}):(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"min-h-screen lg:min-h-fit",children:[(0,d.jsxs)("div",{className:"grid lg:grid-cols-3 mt-2 md:grid-cols-2 grid-cols-1 gap-4 animate-fadeIn",children:[a.map((function(e,t){return(0,d.jsx)(h,(0,c.Z)((0,c.Z)({},e),{},{colorIndex:t}),t)})),(0,d.jsx)(h,{title:"Total Amount Invested",icon:(0,d.jsx)(x(),{className:"w-8 h-8"}),value:"$".concat(S),description:"",colorIndex:0}),(0,d.jsx)(h,{title:"Total Tokens",icon:(0,d.jsx)(m(),{className:"w-8 h-8"}),value:E,description:"",colorIndex:1})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4 mt-4 animate-fadeIn",children:[(0,d.jsx)(h,{title:"Total Available Tokens",icon:(0,d.jsx)(m(),{className:"w-8 h-8"}),value:W.toFixed(2),description:"",colorIndex:0}),(0,d.jsx)(h,{title:"Total Tokens Withdrawn",icon:(0,d.jsx)(m(),{className:"w-8 h-8"}),value:M.toFixed(2),description:"",colorIndex:1})]})]})})};var k=function(){var e=(0,r.I0)();return(0,n.useEffect)((function(){e((0,s.Iw)({title:"Dashboard"}))}),[]),(0,d.jsx)(g,{})}}}]);
//# sourceMappingURL=542.ed7c1c25.chunk.js.map