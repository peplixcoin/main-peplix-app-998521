"use strict";(self.webpackChunkadmin_dashboard_template_dashwind=self.webpackChunkadmin_dashboard_template_dashwind||[]).push([[951],{2782:function(e,t,a){var n=a(3547),s=a(184);t.Z=function(e){var t=e.title,a=e.children,r=e.topMargin,i=e.TopSideButtons;return(0,s.jsxs)("div",{className:"card w-full p-6 bg-base-100 shadow-xl "+(r||"mt-6"),children:[(0,s.jsxs)(n.Z,{styleClass:i?"inline-block":"",children:[t,i&&(0,s.jsx)("div",{className:"inline-block float-right",children:i})]}),(0,s.jsx)("div",{className:"divider mt-2"}),(0,s.jsx)("div",{className:"h-full w-full pb-6 bg-base-100",children:a})]})}},3547:function(e,t,a){var n=a(184);t.Z=function(e){var t=e.styleClass,a=e.children;return(0,n.jsx)("div",{className:"text-xl font-semibold ".concat(t),children:a})}},5951:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var n=a(2791),s=a(9434),r=a(5054),i=a(4165),c=a(5861),l=a(9439),o=a(7689),u=a(1989),d=a(2782),p=a(184);var m=function(){var e=(0,o.UO)().packageId,t=(0,n.useState)(null),a=(0,l.Z)(t,2),m=a[0],f=a[1],h=(0,n.useState)(null),x=(0,l.Z)(h,2),g=x[0],b=x[1],v=(0,n.useState)(null),k=(0,l.Z)(v,2),j=k[0],y=k[1],Z=(0,n.useState)(""),w=(0,l.Z)(Z,2),N=w[0],I=w[1],T=(0,n.useState)(""),S=(0,l.Z)(T,2),D=S[0],P=S[1],F=(0,n.useState)(!1),C=(0,l.Z)(F,2),_=C[0],R=C[1],E=(0,n.useState)(null),q=(0,l.Z)(E,2),M=q[0],A=q[1],B=(0,n.useState)(!1),H=(0,l.Z)(B,2),Q=H[0],U=H[1],O=(0,n.useState)(600),L=(0,l.Z)(O,2),z=L[0],G=L[1],V=(0,n.useState)(!1),Y=(0,l.Z)(V,2),W=Y[0],$=Y[1],J=(0,n.useState)(null),K=(0,l.Z)(J,2),X=K[0],ee=K[1],te=(0,n.useState)(0),ae=(0,l.Z)(te,2),ne=ae[0],se=ae[1],re=(0,n.useState)(!1),ie=(0,l.Z)(re,2),ce=ie[0],le=ie[1],oe=(0,n.useState)(!1),ue=(0,l.Z)(oe,2),de=ue[0],pe=ue[1],me=(0,n.useState)("fixed"),fe=(0,l.Z)(me,2),he=fe[0],xe=fe[1],ge=(0,o.s0)(),be=(0,s.I0)(),ve=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(t){var a,n,s=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:3,e.prev=1,e.next=4,u.Z.get(t,{timeout:5e3});case 4:return n=e.sent,e.abrupt("return",n.data);case 8:if(e.prev=8,e.t0=e.catch(1),!(a>0)){e.next=14;break}return e.abrupt("return",ve(t,a-1));case 14:throw e.t0;case 15:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();(0,n.useEffect)((function(){be((0,r.hS)());var t=function(){var t=(0,c.Z)((0,i.Z)().mark((function t(){var a;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ve("".concat("https://main-peplix-app-998521.onrender.com","/api/users/packages/").concat(e));case 3:a=t.sent,f(a),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Failed to fetch package details",t.t0),be((0,r.c0)({message:"Failed to load package details. Please try again later.",status:0}));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t()}),[e,be]),(0,n.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve("".concat("https://main-peplix-app-998521.onrender.com","/api/users/stats"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 3:(t=e.sent)&&t.tokenValue>0?b(t.tokenValue):(I("Invalid or missing token value."),be((0,r.c0)({message:"Invalid or missing token value.",status:0}))),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Failed to fetch token value:",e.t0),I("Failed to fetch token value."),be((0,r.c0)({message:"Failed to fetch token value.",status:0}));case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[be]),(0,n.useEffect)((function(){if(m&&g){var e=Math.floor(m.price/g);y(e)}}),[m,g]),(0,n.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(){var t,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve("".concat("https://main-peplix-app-998521.onrender.com","/api/users/usd-rate"));case 3:t=e.sent,a=t.rate,m&&se((m.price*a).toFixed(2)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Failed to fetch USD exchange rate:",e.t0),I("Failed to fetch the exchange rate."),be((0,r.c0)({message:"Failed to fetch the exchange rate.",status:0}));case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();m&&e()}),[m]),(0,n.useEffect)((function(){W&&ke()}),[W]);var ke=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(){var t,a,n,s,c=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:3,e.prev=1,e.next=4,u.Z.get("".concat("https://main-peplix-app-998521.onrender.com","/api/users/qr-code"),{responseType:"arraybuffer"});case 4:a=e.sent,n=new Blob([a.data],{type:a.headers["content-type"]}),s=URL.createObjectURL(n),ee(s),e.next=20;break;case 10:if(e.prev=10,e.t0=e.catch(1),!(t>0)){e.next=17;break}return console.warn("Retrying to fetch QR code..."),e.abrupt("return",ke(t-1));case 17:console.error("Failed to fetch QR code after multiple attempts:",e.t0),I("Failed to load QR code. Please try again."),be((0,r.c0)({message:"Failed to load QR code. Please try again.",status:0}));case 20:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();(0,n.useEffect)((function(){if(Q&&z>0){var e=setTimeout((function(){return G(z-1)}),1e3);return function(){return clearTimeout(e)}}if(0===z){I("Payment time has expired. Redirecting to dashboard in 5 seconds."),$(!1),U(!1),pe(!1),A(5);var t=setInterval((function(){A((function(e){return e<=1&&(clearInterval(t),ge("/app/dashboard")),e-1}))}),1e3)}}),[Q,z,ge]);var je=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(){var t,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D.trim()){e.next=4;break}return I("Please enter the Transaction ID before submitting."),be((0,r.c0)({message:"Please enter the Transaction ID before submitting.",status:0})),e.abrupt("return");case 4:if(64===D.length){e.next=8;break}return I("Please enter a valid 64-digit Transaction ID."),be((0,r.c0)({message:"Please enter a valid 64-digit Transaction ID.",status:0})),e.abrupt("return");case 8:window.confirm("Are you sure you want to submit this Transaction ID?")&&(le(!0),t=localStorage.getItem("token"),a=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(){var n,s,c,l=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>0&&void 0!==l[0]?l[0]:3,e.prev=1,e.next=4,u.Z.post("".concat("https://main-peplix-app-998521.onrender.com","/api/users/submit-utr"),{packageId:m._id,packageAmount:m.price,packageName:m.name,stackingPeriod:m.stacking_period,min_tokens_req:m.min_tokens_req,utr:D,amountInINR:ne},{headers:{Authorization:"Bearer ".concat(t)},timeout:5e3});case 4:s=e.sent,I("Transaction ID submitted successfully! You will receive ".concat(s.data.tokens," tokens. Transaction is pending approval.")),be((0,r.c0)({message:"Transaction ID submitted successfully! You will receive ".concat(s.data.tokens," tokens. Redirecting to dashboard in 5 seconds..."),status:1})),R(!1),A(5),c=setInterval((function(){A((function(e){return e<=1&&(clearInterval(c),ge("/app/dashboard")),e-1}))}),1e3),e.next=25;break;case 12:if(e.prev=12,e.t0=e.catch(1),!e.t0.response||400!==e.t0.response.status||"Transaction ID has already been submitted. Please use a unique Transaction ID."!==e.t0.response.data.message){e.next=19;break}I("This Transaction ID has already been submitted. Please enter a unique Transaction ID."),be((0,r.c0)({message:"This Transaction ID has already been submitted. Please enter a unique Transaction ID.",status:0})),e.next=25;break;case 19:if(!(n>0)){e.next=23;break}return e.abrupt("return",a(n-1));case 23:I("Failed to submit Transaction ID after multiple attempts. Please try again."),be((0,r.c0)({message:"Failed to submit Transaction ID after multiple attempts. Please try again.",status:0}));case 25:return e.prev=25,le(!1),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[1,12,25,28]])})));return function(){return e.apply(this,arguments)}}(),a());case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=function(e){xe(e.target.value)};if(!m||null===g)return(0,p.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,p.jsx)("p",{className:"text-lg text-gray-600",children:"Loading package details..."})});var Ze="smart"===he&&j?Math.floor(.65*j):j;return(0,p.jsx)("div",{className:"container mx-auto animate-fadeIn",children:(0,p.jsxs)(d.Z,{title:"".concat(m.name),topMargin:"mt-2",children:[(0,p.jsxs)("div",{className:"mb-6",children:[(0,p.jsxs)("p",{className:"text-lg",children:[(0,p.jsx)("strong",{children:"Price:"})," ",(0,p.jsxs)("span",{className:"text-green-600",children:["$",m.price]})]}),(0,p.jsxs)("p",{className:"text-lg",children:[(0,p.jsx)("strong",{children:"Tokens:"})," ",null!==Ze?Ze:"Calculating..."]}),(0,p.jsxs)("p",{className:"text-lg",children:[(0,p.jsx)("strong",{children:"Stacking Period:"})," ",m.stacking_period," days"]}),(0,p.jsx)("p",{className:"text-lg",children:(0,p.jsx)("strong",{children:"Features:"})}),(0,p.jsxs)("ul",{className:"list-disc ml-6 text-lg",children:[m.feature1&&(0,p.jsx)("li",{children:m.feature1}),m.feature2&&(0,p.jsx)("li",{children:m.feature2}),m.feature3&&(0,p.jsx)("li",{children:m.feature3}),m.feature4&&(0,p.jsx)("li",{children:m.feature4})]}),(0,p.jsxs)("p",{className:"text-lg text-red-500 mt-2",children:[(0,p.jsx)("strong",{children:"Minimum Tokens:"})," ",m.min_tokens_req]})]}),!_&&(0,p.jsxs)(p.Fragment,{children:[!W&&!de&&(0,p.jsx)("button",{onClick:function(){pe(!0)},className:"btn btn-primary w-full py-3 font-bold rounded-md hover:bg-blue-700 transition duration-300",children:"Buy Now"}),de&&(0,p.jsxs)("div",{className:"mt-4",children:[(0,p.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Choose Staking Option"}),(0,p.jsxs)("div",{className:"flex flex-col space-y-2 mb-4",children:[(0,p.jsxs)("label",{className:"flex items-center",children:[(0,p.jsx)("input",{type:"radio",name:"stakingType",value:"fixed",checked:"fixed"===he,onChange:ye,className:"mr-2"}),(0,p.jsx)("span",{className:"text-lg",children:"Fixed Staking"})]}),(0,p.jsxs)("label",{className:"flex items-center",children:[(0,p.jsx)("input",{type:"radio",name:"stakingType",value:"smart",checked:"smart"===he,onChange:ye,className:"mr-2"}),(0,p.jsx)("span",{className:"text-lg",children:"Smart Staking "})]})]}),(0,p.jsx)("button",{onClick:function(){$(!0),U(!0),pe(!1)},className:"w-full py-3 bg-blue-600 text-white font-bold rounded-md hover:bg-blue-700 transition-colors duration-300",children:"Confirm Staking Option"})]}),W&&(0,p.jsxs)("div",{className:"mt-4 text-center",children:[(0,p.jsxs)("p",{className:"text-lg mb-4",children:["Please complete your payment within ",(0,p.jsxs)("span",{className:"font-bold",children:[Math.floor(z/60),":",z%60]})," minutes."]}),(0,p.jsxs)("p",{className:"text-lg break-all",children:[(0,p.jsx)("strong",{children:"Wallet Address:"})," ","TPkFPwgUZHnntSH6djHDH9GFggbgkGipH9"]}),X&&(0,p.jsx)("img",{src:X,alt:"QR Code",className:"mx-auto",style:{width:"200px",height:"200px"}}),(0,p.jsx)("button",{onClick:function(){$(!1),U(!1),R(!0),pe(!1)},className:"mt-4 w-full py-3 bg-green-500 text-white font-bold rounded-md hover:bg-green-600 transition-colors duration-300",children:"Payment Done"})]})]}),_&&(0,p.jsxs)("div",{className:"mt-8",children:[(0,p.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Enter 64 digit Transaction ID to Complete Purchase"}),(0,p.jsx)("input",{type:"text",placeholder:"Enter Transaction ID",value:D,onChange:function(e){return P(e.target.value)},className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,p.jsx)("button",{onClick:je,className:"mt-4 w-full py-3 bg-green-500 text-white font-bold rounded-md hover:bg-green-600 transition-colors duration-300",disabled:ce,children:ce?"Submitting Transaction ID...":"Submit Transaction ID"})]}),N&&(0,p.jsx)("p",{className:"mt-6 text-center ".concat(N.includes("successfully")?"text-green-600":"text-red-600"," font-semibold"),children:N}),null!==M&&(0,p.jsxs)("p",{className:"mt-4 text-center text-gray-600 font-semibold",children:["Redirecting to dashboard in ",M," second",1!==M?"s":"","."]})]})})};var f=function(){var e=(0,s.I0)();return(0,n.useEffect)((function(){e((0,r.Iw)({title:"Package Details"}))}),[]),(0,p.jsx)(m,{})}}}]);
//# sourceMappingURL=951.c2190d48.chunk.js.map